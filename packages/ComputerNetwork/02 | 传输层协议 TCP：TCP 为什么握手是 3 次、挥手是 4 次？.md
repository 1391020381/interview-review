* TCP UDP 是今天应用最广泛的传输层协议。

* 应用层
* 传输层 TCP/UDP
* 网络层 IP
* 数据链路层
* 物理层

# TCP协议
* TCP 是传输层协议,提供了Host-To-Host数据的可靠传输 支持全双工,是一个连接导向的协议。

## 什么是连接和会话

* 连接 (Connection) 连接是数据传输传输双方的契约。保证两个程序都在线,而且尽快的响应对方的请求,这就是连接。

* 设计上,连接是一种传输数据的行为。传输之前,建立一个连接。具体来说,数据收发双方的内存中都建立一个用于维护数据传输状态的对象。 比如 IP 端口。  连接是网络行为状态的记录。

* 会话 会话是应用的行为。

* 总结下, 会话是应用层的概念 连接是传输层的概念。

## 双工 单工问题

* 在任何一个时刻 如果数据只能单向发送,就是单工。
* 某个时刻数据可以向一个方向传输 也可以向另外一个反向传输,而且交替进行,叫做半双工。
* 如果任何时候数据都可以双向收发,这就是全双工。

* TCP是一个双工协议,数据任何时候都可以双向传输。 意味着客户端 服务端可以平等发送消息 接受消息。


## 可靠性

* 可靠性指数据保证无损传输。
* 如果发送方按照顺序发送 然后数据无序地在网络间传递,就必须有一个算法在接收方将数据恢复原有的顺序。


## TCP的握手和挥手 
* TCP是一个连接导向的协议,设计有建立连接(握手) 和断开连接 (挥手)的过程。
* TCP没有设计会话(Session) 因为会话通常是一个应用的行为。

* 如果一个Host主动向另一个Host发起连接,称为 SYN (Synchronization) 请求同步。
* 如果一个Host主动断开请求 称为 FIN (Finish) 请求完成。
* 如果一个Host给另一个Host发送数据,称为PSH (PUSH) 数据推送。

* 以上3中请求 接受方收到数据后,都需要给发送方一个ACK (Acknowledgement) 响应。 请求/响应的模型是可靠性的要求。如果一个请求没有响应,发送可能会认为自己需要重发这个请求。

![TCP三次握手](https://s0.lgstatic.com/i/image6/M00/38/6D/Cgp9HWB5RCqAVfhiAADJmfGn2O0616.png)

![TCP四次挥手](https://s0.lgstatic.com/i/image6/M00/3D/55/CioPOWCTwu-AD9PgAABp1yJqsPI439.png)