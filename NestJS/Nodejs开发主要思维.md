* [Nodejs应用开发实战](https://kaiwu.lagou.com/course/courseInfo.htm?courseId=694#/detail/pc?id=6789)
* [Node.js健康检查和过载保护](https://juejin.cn/post/7252171148749439036)

* 事件循环

# 哪些因素会影响Node.js性能
1. 代码逻辑
- CPU密集型计算  
    - 大的数据循环
    - 字符串处理转化
    - 图片 视频的计算处理
2. 网络 I/O
* 同步阻塞I/O的字面意思是发出网络请求后需要等待返回后,再处理其他计算
* 异步非阻塞 I/O 就是发起网络I/O后,还可以处理其他的计算,这也是为什么Nodejs在处理网络I/O性能较高的原因。
* 通道复用 减少TCP握手
* 增加缓存
* 长链接链接池    数据库

* 网络I/O一般不影响主线程逻辑,往往 网络I/O请求的服务反而是瓶颈端。 从而影响Nodejs中涉及该网络服务的请求。 其次网络I/O堆积较多会侧面影响:
    - 服务器本身的网络模块问题
    - Nodejs性能,导致其他服务接口受影响。
    - 因此在网络 I/O 瓶颈时需要考虑修改服务器网络相关的配置。
3. 磁盘I/O  

* `只有CPU 密集计算会真正影响到 Node.js 服务性能，而网络 I/O 和磁盘 I/O 都是直接影响服务器性能，从而侧面影响到 Node.js 服务性能`

4. 集群服务

5. 其他 
    - `内存限制`
        - 在 32 位服务器上 Node.js 的内存限制是 0.7 G，而在 64 位服务器上则是 1.4 G，而这个限制主要是因为 Node.js 的垃圾回收线程在超过限制内存时，回收时长循环会大于 1s，从而会影响性能问题。
        - 现网我们一般会启用多个进程，如果每个进程损耗 1.4 G，那么加起来可能超出了服务器内存上限，从而导致服务器瘫痪。其次如果内存不会超出服务器上限，而是在达到一定上限时，也就是我们上面说的 0.7 G和 1.4 G，会导致服务器重启，从而会导致接口请求失败的问题。
    - `句柄限制`
        - 句柄可以简单理解为一个 ID 索引，通过这个索引可以访问到其他的资源，比如说文件句柄、网络 I/O 操作句柄等等，而一般服务器句柄都有上限。当 Node.js 没有控制好句柄，比如说无限的打开文件并未关闭，就会出现句柄泄漏问题，而这样会导致服务器异常，从而影响 Node.js 服务。
# 过载保护 

*  ps -p ${process.pid} -o pid,rss,vsz,pcpu,comm

# 优化设计：在 I/O方面应该注意哪些要点
* I/O在系统层面会有两个阶段 以读为例子
    - 第一阶段读取文件 将文件放入操作系统内核缓冲区
    - 第二阶段是将内核缓冲区拷贝到应用程序地址空间

* 磁盘I/O
* 网络I/O

# 缓存与应用: 多级缓存策略介绍与应用



# 系统稳定：如何监控和保护进程安全
