* [pnpm 是凭什么对 npm 和 yarn 降维打击的](https://juejin.cn/post/7127295203177676837)

* npm2的 node_modules是嵌套的。
* 多个包之间难免会有公共的依赖,这样嵌套的话，同样的依赖会复制很多次,会占据比较大的磁盘空间。
* 致命问题是 windows的文件路径最长是260多个字符,这样嵌套是会超过 windows路径的长度限制的。

* yarn  社区解决方案。
* 所有依赖不再一层层嵌套了,而是全部在同一层,这样也就没有依赖重复多次的问题了,也就没有路径过长的问题了。
* 全部平铺在了一层,展开下面的的包大部分是没有二层 node_modules的
* 因为一个包是可能有多个版本的，提升只能提升一个，所以后面再遇到相同包的不同版本，依然还是用嵌套的方式。

* npm3  也采用平铺的方案 


* 幽灵依赖   平铺  ->  依赖其他包的依赖  -> 某天这个依赖没有了，会造成代码无法运行。
* 多版本 只能提升一个


* pnpm
* 所有的依赖都在这里铺平了，都是从全局 store 硬连接过来的，然后包和包之间的依赖关系是通过软链接组织的。